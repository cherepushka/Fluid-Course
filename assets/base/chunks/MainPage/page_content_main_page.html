<!-- Приветственный текст и картинка  -->
<main>
    <div class="container-xxl">

        <div class="main py-5" style="background-size: 59%;">
            <div class="row">
                <h1 class="col-lg-7 action-color text-uppercase">
                    Не останавливайся<br> на достигнутом!
                </h1>
            </div>
            <div class="d-flex justify-content-center">
                <img src="/images/main.png" class="img-fluid mb-5 d-lg-none">
            </div>
            <div class="row mb-lg-5 mb-3 slogan">
                <p class="col-lg-6">
                    [[*slogan]]
                </p>
            </div>

            <a href="#program"><button type="button" class="color-white btn btn-primary">Выбрать
                    курс</button></a>
        </div>


        <div class="row mb-5 align-items-stretch gap-4">
            <div class="col border p-5 rounded-4">

                [[*left_block]]

            </div>
            <div class="col border p-5 rounded-4">

                [[*right_block]]

            </div>
        </div>
    </div>
</main>

<!-- Ближайшие программамы обучения -->
<section class="gradient text-light pt-5">

    <div class="container-xxl">

        <h2 id="program" class="mb-5">
            Ближайшие программы обучения 
        </h2>
        <div class="d-flex mt-5">
            <div class="row mb-5 gy-4">

                {'!pdoResources' | snippet : [
                'parents' => 14,
                'tpl' => 'tpl_main_page_program',
                'limit' => 3,
                'includeTVs' => 'total_price,monthly_price,anotation,img,category_program,date_start_calendar',
                'sortby' => 'date_start_calendar',
                'sortdir' => 'DESC',
                'showHidden' => 1,
                'includeContent' => 1,
                'hideContainers' => 1,
                'showHidden' => 0,
                ]}

                <div
                    class="d-xl-lg-flex d-none justify-content-xxl-start justify-content-center align-items-end col-xxl-3">
                    <a class="text-white  text-decoration-none p-3" href="[[~4]]">Все курсы >> </a>
                </div>
                <div class="d-md-flex d-lg-none d-flex justify-content-center align-items-center col-md-6">
                    <a class="text-white  text-decoration-none p-3" href="[[~4]]">Все курсы >> </a>
                </div>
            </div>
        </div>
        <div class="d-lg-flex d-xl-lg-none d-none justify-content-md-center align-items-end">
            <a class="text-white  text-decoration-none p-3" href="[[~4]]">Все курсы >> </a>
        </div>
    </div>
</section>

<!-- Видеоматериалы и картинка -->
<section class="py-5 mb-lg-5">
    <div class="container-xxl">

        <div class="row flex-lg-row flex-column-reverse">

            <div class="col-lg-6 mb-5 text-center">
                <img class="img-fluid" src="../../../images/f3.png">
            </div>

            <div class="col-lg-6">
                <h2>Видеоматериалы:</h2>
                <ol class="boxs list-unstyled">

                    {set $videomaterials = json_decode($_modx->resource.videomaterial, true)}
                    {foreach $videomaterials as $videomaterial index=$index}
                    {if $index % 2 == 0}

                    <a class="d-flex justify-content-start material-link text-center w-100 move-to-end"
                        href={$videomaterial.link}>
                        <li
                            class="d-flex justify-content-center align-content-center p-3 border rounded-4 mb-3 material-link w-50">
                            {$videomaterial.title}
                        </li>
                    </a>

                    {else}

                    <a class="d-flex justify-content-end material-link text-center w-100 move-to-start"
                        href={$videomaterial.link}>
                        <li
                            class="d-flex justify-content-center align-content-center p-3 border rounded-4 mb-3 material-link w-50">
                            {$videomaterial.title}
                        </li>
                    </a>

                    {/if}
                    {/foreach}

                </ol>
            </div>
        </div>

    </div>
</section>

<!-- Анимация видеоматериалов -->
<script>
    let moveToStart = document.querySelectorAll('.move-to-start li');
    let moveToEnd = document.querySelectorAll('.move-to-end li');
    console.log(moveToStart)
    window.addEventListener("scroll", () => {

        moveToStart.forEach(el => {
            if (isFullyVisible(el)) {
                el.classList.add('transform-to-start');
            } else {
                el.classList.remove('transform-to-start');
            }
        })
        moveToEnd.forEach(el => {
            if (isFullyVisible(el)) {
                el.classList.add('transform-to-end');
            } else {
                el.classList.remove('transform-to-end');
            }
        })
    })

    function isFullyVisible(el) {
        var elementBoundary = el.getBoundingClientRect();

        var top = elementBoundary.top;
        var bottom = elementBoundary.bottom;

        return top >= 0 && bottom <= window.innerHeight;
    }
</script>

<!-- QR-коды и картинка-стрелка -->
<section class="py-sm-5 pt-5">
    <div class="container-xxl">
        <div class="row justify-content-between">

            <div class="col-lg-7 col">

                <div class="d-flex justify-content-xl-lg-between justify-content-start pe-xl-lg-5">
                    <div class="">
                        <img class="arrow" src="/images/arraw.svg">
                    </div>
                    <div class="d-xl-lg-block d-none">
                        <img src="/images/f3/1.svg" alt="">
                    </div>
                    <div class="d-xl-lg-block d-none">
                        <img src="/images/f3/2.svg" alt="">
                    </div>
                    <div class="d-xl-lg-block d-none">
                        <img src="/images/f3/3.svg" alt="">
                    </div>
                </div>


                <h2 class="mt-4 ps-sm-5 ps-3 fw-lighter">
                    Актуальные новости, бесплатные видео и материалы
                </h2>

            </div>

            <div class="d-block justify-content-evenly col-lg-5 mt-4">

                <div class="d-flex justify-content-md-around justify-content-evenly mb-3">

                    <div class="">
                        <a href="https://vk.com/fluidcourse" class="text-center text-info text-decoration-none">
                            <div class="logo-main-page">
                                <img class="d-inline-block" src="/images/social/vk_logo.svg" alt="vk logo">
                            </div>
                            <div class="mb-3" style="color:#4763D5">
                                ВКонтакте
                            </div>
                            <div class=" d-md-block d-none">
                                <img src="/images/social/vk_qr.svg" alt="qr code link on vk group">
                            </div>
                        </a>
                    </div>

                    <div class="">
                        <a href="https://t.me/fluidcourse" class="text-center text-info text-decoration-none">
                            <div class="logo-main-page">
                                <img src="/images/social/tlg_logo.svg" alt="vk logo">
                            </div>
                            <div class="mb-3" style="color:#4763D5">
                                Телеграм
                            </div>
                            <div class=" d-md-block d-none">
                                <img src="/images/social/tlg_qr.svg" alt="qr code link on telegram group">
                            </div>
                        </a>
                    </div>

                </div>
                
                <div class="text-center d-md-block d-none" style="color:#4763D5">
                    Жми или сканируй
                </div>

            </div>

        </div>

    </div>
</section>

<!-- ОТЗЫВЫ-->
<section class="py-5 mb-5">
    <div class="container-xxl">

        <div class="reviews">
            <h2 class="mb-5">
                Отзывы
            </h2>

            <div id="reviews" class="carousel slide p-3 p-md-0">
                <div class="carousel-inner">

                    {set $comments = json_decode($_modx->resource.comment, true)}
                    {set $i = 0}
                    {foreach $comments as $comment}
                    {if $i == 0}
                    <div class="carousel-item active">
                        <div class="d-block w-100">
                            <div class="row gy-4 align-items-stretch">

                                <!-- 1й активный комментарий -->
                                <div class="">
                                    <div class="border rounded-4 p-lg-4 py-1 px-2 comments">
                                        <!-- style="height: 430px;"> -->
                                        <div class="row">
                                            <div class="col flex-grow-0">
                                                <img src={$comment.avatar}>
                                            </div>
                                            <div class="col ">
                                                <strong>
                                                    {$comment.name}
                                                </strong>
                                                <p>
                                                    {$comment.course}
                                                </p>
                                            </div>
                                        </div>

                                        <p>
                                            {$comment.comment}
                                        </p>
                                    </div>
                                </div>
                                {set $i += 1}

                            </div>
                        </div>
                    </div>
                    {else}

                    <div class="carousel-item">
                        <div class="d-block w-100">
                            <div class="row gy-4 align-items-stretch">
                                <!-- 1й неактивный комментарий-->
                                <div class="">
                                    <div class="border rounded-4 p-lg-4 py-1 px-2 comments">
                                        <!-- <div class="border rounded-4 p-lg-4 py-1 px-2 overflow-auto" style="height: 430px;"> -->
                                        <div class="row">
                                            <div class="col flex-grow-0">
                                                <img src={$comment.avatar}>
                                            </div>
                                            <div class="col ">
                                                <strong>
                                                    {$comment.name}
                                                </strong>
                                                <p>
                                                    {$comment.course}
                                                </p>
                                            </div>
                                        </div>

                                        {$comment.comment}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/if}

                    {/foreach}
                </div>
                
      <!-- Кнопки переключения выше 1140px -->
      <div class="d-xl-lg-flex d-none">
        <button class="carousel-control-prev corp-clients-carousel-prev" type="button" data-bs-target="#reviews"
          data-bs-slide="prev">
          <img src="/images/chevron_left.png" alt="">
        </button>
        <button class="carousel-control-next corp-clients-carousel-next" type="button" data-bs-target="#reviews"
          data-bs-slide="next">
          <img src="/images/chevron_right.png" alt="">
        </button>
      </div>

      <!-- Кнопки переключения ниже 1140px -->
      <div class="d-xl-lg-none d-flex justify-content-center mt-3">
        <button class="border-0 bg-transparent btn-case" type="button" data-bs-target="#reviews" data-bs-slide="prev">
          <img style="width: 45px; height: 45px;" src="/images/chevron_left.png" alt="">
        </button>
        <!-- <div class="d-xl-lg-none d-flex align-items-center mx-3 " style="font-size: 14px;"><span
            class="number-case"></span> / {$countCases}</div> -->
        <button class="border-0 bg-transparent btn-case" type="button" data-bs-target="#reviews" data-bs-slide="next">
          <img style="width: 45px; height: 45px;" src="/images/chevron_right.png" alt="">
        </button>
      </div>
            </div>

        </div>
    </div>
</section>