[[!AjaxForm?
&snippet=`FormIt`
&hooks=`FormItSaveForm,email{if $_modx->resource.teachBase_session_id?},teachbaseReg{/if}`
&emailSubject=`От FluidCourse`
&emailTo=`[[+email]]`
&emailTpl=`tpl_course_emal`
&emailFrom=`[[++emailsender]]`
&emailFromName=`FluidCourse.ru`
&formName=`[[*pagetitle]]`
&formFields=`
name_and_surname,
email,
phone,
company,
job,
promocode,
personal-data,
mailing`
&fieldNames=`
name_and_surname==Имя,
email==Электронная почта,
phone==Телефон,
company==Организация,
job==Должность,
promocode==Промокод
personal-data==Согласие на обработку персональных данных,
mailing==Согласие на получение SMS и Email рассылок`
&validate=`
name_and_surname:required:minLength=^3^,
email:required:email,
phone:required:regexp=^/^\+7 \([0-9][0-9][0-9]\) [0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]/^,
company:required:minLength=^3^,
job:required:minLength=^3^,
{if $_modx->resource.required_promo?}promocode:required:regexp=^/fcng2023|[[*promocode]]/iu^,{else}{/if}
workemail:blank
`
&successMessage=`Поздравляем с успешной регистрацией!`
&validationErrorMessage=`Неправильно заполнена форма!`
]]

<!--&form=`tpl_enroll_form`-->

<form class="ajax_form" method="post">

  <!-- Подключение библиотеки jQuery -->
  <script src="jquery.js"></script>
  <!-- Подключение jQuery плагина Masked Input -->
  <script src="/assets/js/jquery.maskedinput.min.js"></script>

  <ul class="apply-form__success"></ul>
  <ul class="apply-form__errors"></ul>

  <input class="final_work_input" type="text" placeholder="Имя фамилия" name="name_and_surname" required>

  <input class="final_work_input" type="text" placeholder="E-mail" class="mail" name="email" required>

  <input class="final_work_input" id="form_phone" type="text" placeholder="+7 (999) 999-99-99" class="phone"
    name="phone" required>

  <input class="final_work_input" type="text" placeholder="Компания" name="company" required>

  <input class="final_work_input" type="text" placeholder="Должность" name="job" required>

  <input class="final_work_input promocode" type="text" placeholder="Промокод" name="promocode"
  title="Введите корректный Промокод" {if $_modx->resource.required_promo?}required{else}{/if}>


  <script>
    //Код jQuery, установливающий маску для ввода телефона элементу input
    //1. После загрузки страницы,  когда все элементы будут доступны выполнить...
    $(function () {
      //2. Получить элемент, к которому необходимо добавить маску
      $("#form_phone").mask("+7 (999) 999-99-99");
    });
  </script>

  <!--для защиты от ботов-->
  <input type="hidden" name="workemail" value="" />

  <div class="split">
    <button class="btn btn-primary w-100" type="submit">
      Записаться
    </button>
  </div>

  <div class="d-flex justify-content-between align-items-center my-3">
    <input class="checkbox_accept" type="checkbox" id="personal_data" name="personal_data[]" checked required disabled>
    <label class="checkbox-other__label" for="personal_data"><span></span></label>
    <div class="text_accept w-100">Записываясь на курс, вы даете согласие на обработку своих
      персональных данных в соответствии
      <span>с политикой конфиденциальности.
    </div>
  </div>

  <div class="d-flex align-items-center">
    <input class="checkbox_accept" type="checkbox" id="mailing" name="mailing[]">
    <label class="checkbox-other__label" for="mailing"><span></span></label>
    <div class="text_accept">Получение SMS и Email рассылок.</div>
  </div>

</form>

В form_reg_block
{- if $_modx->resource.change_forms_buy_or_reg?}

        [[!$tpl_enroll_form]]


        {- else}

        [[!$tpl_enroll_optional_promo_form]]

        {- /if}